<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>A new Relm 4 you: announcing Relm4 v0.4! | Eberhardt blog</title>
<meta name=keywords content="relm4"><meta name=description content="A new realm is here for you to explore! I&rsquo;m happy to announce Relm4 v0.4, our biggest release so far!
About Relm4 Relm4 is an idiomatic GUI library inspired by Elm and based on gtk4-rs.
We believe that GUI development should be easy, productive and delightful.
The gtk4-rs crate already provides everything you need to write modern, beautiful and cross-platform applications. Built on top of this foundation, Relm4 makes developing more idiomatic, simpler and faster and enables you to become productive in just a few hours."><meta name=author content="Aaron Erhardt"><link rel=canonical href=https://aaronerhardt.github.io/blog/posts/announcing_relm4_v0.4/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://aaronerhardt.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://aaronerhardt.github.io/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://aaronerhardt.github.io/blog/favicon-32x32.png><link rel=apple-touch-icon href=https://aaronerhardt.github.io/blog/apple-touch-icon.png><link rel=mask-icon href=https://aaronerhardt.github.io/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://aaronerhardt.github.io/blog/posts/announcing_relm4_v0.4/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="A new Relm 4 you: announcing Relm4 v0.4!"><meta property="og:description" content="A new realm is here for you to explore! I&rsquo;m happy to announce Relm4 v0.4, our biggest release so far!
About Relm4 Relm4 is an idiomatic GUI library inspired by Elm and based on gtk4-rs.
We believe that GUI development should be easy, productive and delightful.
The gtk4-rs crate already provides everything you need to write modern, beautiful and cross-platform applications. Built on top of this foundation, Relm4 makes developing more idiomatic, simpler and faster and enables you to become productive in just a few hours."><meta property="og:type" content="article"><meta property="og:url" content="https://aaronerhardt.github.io/blog/posts/announcing_relm4_v0.4/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-01-17T15:00:00+00:00"><meta property="article:modified_time" content="2022-01-17T15:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="A new Relm 4 you: announcing Relm4 v0.4!"><meta name=twitter:description content="A new realm is here for you to explore! I&rsquo;m happy to announce Relm4 v0.4, our biggest release so far!
About Relm4 Relm4 is an idiomatic GUI library inspired by Elm and based on gtk4-rs.
We believe that GUI development should be easy, productive and delightful.
The gtk4-rs crate already provides everything you need to write modern, beautiful and cross-platform applications. Built on top of this foundation, Relm4 makes developing more idiomatic, simpler and faster and enables you to become productive in just a few hours."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://aaronerhardt.github.io/blog/posts/"},{"@type":"ListItem","position":2,"name":"A new Relm 4 you: announcing Relm4 v0.4!","item":"https://aaronerhardt.github.io/blog/posts/announcing_relm4_v0.4/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"A new Relm 4 you: announcing Relm4 v0.4!","name":"A new Relm 4 you: announcing Relm4 v0.4!","description":"A new realm is here for you to explore! I\u0026rsquo;m happy to announce Relm4 v0.4, our biggest release so far!\nAbout Relm4 Relm4 is an idiomatic GUI library inspired by Elm and based on gtk4-rs.\nWe believe that GUI development should be easy, productive and delightful.\nThe gtk4-rs crate already provides everything you need to write modern, beautiful and cross-platform applications. Built on top of this foundation, Relm4 makes developing more idiomatic, simpler and faster and enables you to become productive in just a few hours.","keywords":["relm4"],"articleBody":"A new realm is here for you to explore! I’m happy to announce Relm4 v0.4, our biggest release so far!\nAbout Relm4 Relm4 is an idiomatic GUI library inspired by Elm and based on gtk4-rs.\nWe believe that GUI development should be easy, productive and delightful.\nThe gtk4-rs crate already provides everything you need to write modern, beautiful and cross-platform applications. Built on top of this foundation, Relm4 makes developing more idiomatic, simpler and faster and enables you to become productive in just a few hours.\nWhat’s new? Relm4 v0.4 brings a lot of new features and improvements. I’m excited to present to you the highlights of this release!\nMacros for everyone! In recent Relm4 releases, the macros were tightly integrated into the library itself. This limitation is now removed! Most importantly, users of gtk4-rs will be able to use the view! macro by only pulling in relm4-macros as dependency without the rest of Relm4. This gives you even more freedom to choose how much of Relm4’s features you want to use.\n// Creating a box with a button inside. relm4_macros::view! { vbox = gtk::Box { append = \u0026gtk::Button { set_label: \"Click me!\", connect_clicked =\u003e |_| { println!(\"Hello world!\"); } }, } } // You can simply use the vbox created in the macro. let spacing = vbox.spacing(); And there’s even more. The view! macro isn’t limited to gtk4-rs. You can use it for regular Rust structures, too!\nuse std::process::Command; let path = \"/\"; relm4_macros::view! { mut process = Command::new(\"ls\") { args: [\"-la\"], current_dir = mut \u0026String { push_str: path, }, env: args!(\"HOME\", \"/home/relm4\"), } } // Output of \"ls -la\" at \"/\" dbg!(process.output()); Micro components for flexibility at runtime Regular components are relatively static, which gives you strong compile time guarantees, among other benefits. They cover most use cases, but they cannot be initialized or destructed manually at runtime.\nThis is where micro components have their strength. They are simpler variants of components that require a bit more manual work, with the advantage of being fully dynamic at runtime.\nA code example can be found here.\nType-safe actions Actions are used in GTK4 to simplify the handling of user interactions. Since you can always mix in as much pure gtk4-rs code into Relm4 applications as you want, actions were never a real problem. Yet, they lived outside of Rust’s type checking.\nWith the help of some traits and macros, it’s now quite convenient to define wrapper types for actions that enable a lot of compile time guarantees for actions. Even typos for action names are eliminated as a source of errors.\n// Defines a new action group new_action_group!(ActionGroup, \"win\"); // A new stateless action type that belongs to `ActionGroup` new_stateless_action!(Action, ActionGroup, \"action\"); // A new action type with a `u8` as state and `u8` as target type new_stateful_action!(U8Action, ActionGroup, \"u8_action\", u8, u8); /* ... */ // This only works because `Action` is actually stateless let action: RelmAction\u003cAction\u003e = RelmAction::new_stateless(move |_| { println!(\"Action called!\"); }); Menu macro Often, actions are used for menus, where each entry is connected to an action. The new menu! macro allows you to create menus conveniently with all the benefits of type-safe actions.\n// Create a `MenuModel` called `menu_model` menu! { main_menu: { \"action\" =\u003e Action, \"stateful action\" =\u003e U8Action(1_u8), section! { \"nested action\" =\u003e Action, \"nested stateful action\" =\u003e U8Action(1_u8), }, } } More macro magic The widget macro has been very helpful in creating readable and elegant UI definitions for regular components since the first release of Relm4. Now, factories and micro components have received their own variants of the widget macro!\n// A simple `FactoryPrototype` implementation #[relm4::factory_prototype] impl FactoryPrototype for Counter { type Factory = FactoryVec\u003cSelf\u003e; type Widgets = FactoryWidgets; type View = gtk::Box; type Msg = AppMsg; view! { gtk::Button { set_label: watch!(\u0026self.value.to_string()), connect_clicked(key) =\u003e move |_| { sender.send(AppMsg::Clicked(key)).unwrap(); } } } fn position(\u0026self, _index: \u0026usize) {} } Better support for Stack and TabView Widgets such as Stack or TabView have methods that return a new widget, such as StackPage. The returned widget was previously inaccessibly in the widget macro and required manual code. This was addressed with a new syntax.\nCleaner dependencies Relm4 now re-exports more crates and has more feature flags. This means you don’t have to include gtk4, libadwaita or relm4-macros anymore, if you have the correct feature flags set.\nrelm4 = { version = \"0.4\", features = [\"tokio-rt\", \"macros\"] } Miscellaneous Several book improvements Reworked initialization process Some trait adjustments Many bug fixes, better error messages and other improvements The full change log can be found here.\nWhere to get started ⬆️ Migration guide\n⭐ Repository\n📖 Book\n📜 Rust documentation\nNote: As of writing this, the book isn’t fully ported to v0.4, but the examples in the repository are always up to date.\nSpecial thanks I highly appreciate feedback and contributions to Relm4 and thank those who helped me with this release:\n@euclio who contributed many fixes and features @mskorkowski for his contributions and work on relm4-store @tronta who contributed a lot to the examples and book improvements everyone else who gave feedback in the Matrix room or on GitHub the whole gtk-rs team for providing awesome Rust bindings for GTK and always being helpful ","wordCount":"869","inLanguage":"en","datePublished":"2022-01-17T15:00:00Z","dateModified":"2022-01-17T15:00:00Z","author":{"@type":"Person","name":"Aaron Erhardt"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://aaronerhardt.github.io/blog/posts/announcing_relm4_v0.4/"},"publisher":{"@type":"Organization","name":"Eberhardt blog","logo":{"@type":"ImageObject","url":"https://aaronerhardt.github.io/blog/favicon.ico"}}}</script></head><body id=top><script>window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://aaronerhardt.github.io/blog/ accesskey=h title="Eberhardt blog (Alt + H)">Eberhardt blog</a><div class=logo-switches></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://aaronerhardt.github.io/blog/>Home</a>&nbsp;»&nbsp;<a href=https://aaronerhardt.github.io/blog/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">A new Relm 4 you: announcing Relm4 v0.4!</h1><div class=post-meta><span title='2022-01-17 15:00:00 +0000 UTC'>January 17, 2022</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Aaron Erhardt&nbsp;|&nbsp;<a href=https://github.com/AaronErhardt/AaronErhardt.github.io/blob/master/blog-src/content/posts/announcing_relm4_v0.4.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><ul><li><a href=#about-relm4 aria-label="About Relm4">About Relm4</a></li></ul><li><a href=#whats-new aria-label="What&rsquo;s new?">What&rsquo;s new?</a><ul><li><a href=#macros-for-everyone aria-label="Macros for everyone!">Macros for everyone!</a></li><li><a href=#micro-components-for-flexibility-at-runtime aria-label="Micro components for flexibility at runtime">Micro components for flexibility at runtime</a></li><li><a href=#type-safe-actions aria-label="Type-safe actions">Type-safe actions</a></li><li><a href=#menu-macro aria-label="Menu macro">Menu macro</a></li><li><a href=#more-macro-magic aria-label="More macro magic">More macro magic</a></li><li><a href=#better-support-for-stack-and-tabview aria-label="Better support for Stack and TabView">Better support for Stack and TabView</a></li><li><a href=#cleaner-dependencies aria-label="Cleaner dependencies">Cleaner dependencies</a></li><li><a href=#miscellaneous aria-label=Miscellaneous>Miscellaneous</a></li></ul></li><li><a href=#where-to-get-started aria-label="Where to get started">Where to get started</a></li><li><a href=#special-thanks aria-label="Special thanks">Special thanks</a></li></ul></div></details></div><div class=post-content><p>A new realm is here for you to explore! I&rsquo;m happy to announce Relm4 v0.4, our biggest release so far!</p><blockquote><h2 id=about-relm4>About Relm4<a hidden class=anchor aria-hidden=true href=#about-relm4>#</a></h2><p>Relm4 is an idiomatic GUI library inspired by <a href=https://elm-lang.org/>Elm</a> and based on <a href=https://crates.io/crates/gtk4>gtk4-rs</a>.</p><p>We believe that GUI development should be easy, productive and delightful.<br>The <a href=https://crates.io/crates/gtk4>gtk4-rs</a> crate already provides everything you need to write modern, beautiful and cross-platform applications.
Built on top of this foundation, Relm4 makes developing more idiomatic, simpler and faster and enables you to become productive in just a few hours.</p></blockquote><h1 id=whats-new>What&rsquo;s new?<a hidden class=anchor aria-hidden=true href=#whats-new>#</a></h1><p>Relm4 v0.4 brings a lot of new features and improvements. I&rsquo;m excited to present to you the highlights of this release!</p><h2 id=macros-for-everyone>Macros for everyone!<a hidden class=anchor aria-hidden=true href=#macros-for-everyone>#</a></h2><p>In recent Relm4 releases, the macros were tightly integrated into the library itself. This limitation is now removed! Most importantly, users of gtk4-rs will be able to use the <code>view!</code> macro by only pulling in <code>relm4-macros</code> as dependency without the rest of Relm4. This gives you even more freedom to choose how much of Relm4&rsquo;s features you want to use.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>// Creating a box with a button inside.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>relm4_macros::view! {
</span></span><span style=display:flex><span>    vbox <span style=color:#f92672>=</span> gtk::Box {
</span></span><span style=display:flex><span>        append <span style=color:#f92672>=</span> <span style=color:#f92672>&amp;</span>gtk::Button {
</span></span><span style=display:flex><span>            set_label: <span style=color:#e6db74>&#34;Click me!&#34;</span>,
</span></span><span style=display:flex><span>            connect_clicked <span style=color:#f92672>=&gt;</span> <span style=color:#f92672>|</span>_<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>                println!(<span style=color:#e6db74>&#34;Hello world!&#34;</span>);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// You can simply use the vbox created in the macro.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> spacing <span style=color:#f92672>=</span> vbox.spacing();
</span></span></code></pre></div><p>And there&rsquo;s even more. The <code>view!</code> macro isn&rsquo;t limited to gtk4-rs. You can use it for regular Rust structures, too!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> std::process::Command;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> path <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;/&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>relm4_macros::view! {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>mut</span> process <span style=color:#f92672>=</span> Command::new(<span style=color:#e6db74>&#34;ls&#34;</span>) {
</span></span><span style=display:flex><span>        args: [<span style=color:#e6db74>&#34;-la&#34;</span>],
</span></span><span style=display:flex><span>        current_dir <span style=color:#f92672>=</span> <span style=color:#66d9ef>mut</span> <span style=color:#f92672>&amp;</span>String {
</span></span><span style=display:flex><span>            push_str: <span style=color:#a6e22e>path</span>,
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        env: <span style=color:#a6e22e>args</span><span style=color:#f92672>!</span>(<span style=color:#e6db74>&#34;HOME&#34;</span>, <span style=color:#e6db74>&#34;/home/relm4&#34;</span>),
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Output of &#34;ls -la&#34; at &#34;/&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>dbg!(process.output());
</span></span></code></pre></div><h2 id=micro-components-for-flexibility-at-runtime>Micro components for flexibility at runtime<a hidden class=anchor aria-hidden=true href=#micro-components-for-flexibility-at-runtime>#</a></h2><p>Regular components are relatively static, which gives you strong compile time guarantees, among other benefits. They cover most use cases, but they cannot be initialized or destructed manually at runtime.</p><p>This is where micro components have their strength. They are simpler variants of components that require a bit more manual work, with the advantage of being fully dynamic at runtime.</p><p>A code example can be found <a href=https://github.com/AaronErhardt/Relm4/blob/main/relm4-examples/examples/micro_components.rs#L7>here</a>.</p><h2 id=type-safe-actions>Type-safe actions<a hidden class=anchor aria-hidden=true href=#type-safe-actions>#</a></h2><p><a href=https://gtk-rs.org/gtk4-rs/git/book/actions.html>Actions</a> are used in GTK4 to simplify the handling of user interactions. Since you can always mix in as much pure gtk4-rs code into Relm4 applications as you want, actions were never a real problem. Yet, they lived outside of Rust&rsquo;s type checking.</p><p>With the help of some traits and macros, it&rsquo;s now quite convenient to define wrapper types for actions that enable a lot of compile time guarantees for actions. Even typos for action names are eliminated as a source of errors.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>// Defines a new action group
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>new_action_group!(ActionGroup, <span style=color:#e6db74>&#34;win&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// A new stateless action type that belongs to `ActionGroup`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>new_stateless_action!(Action, ActionGroup, <span style=color:#e6db74>&#34;action&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// A new action type with a `u8` as state and `u8` as target type
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>new_stateful_action!(U8Action, ActionGroup, <span style=color:#e6db74>&#34;u8_action&#34;</span>, <span style=color:#66d9ef>u8</span>, <span style=color:#66d9ef>u8</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ... */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// This only works because `Action` is actually stateless
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> action: <span style=color:#a6e22e>RelmAction</span><span style=color:#f92672>&lt;</span>Action<span style=color:#f92672>&gt;</span> <span style=color:#f92672>=</span> RelmAction::new_stateless(<span style=color:#66d9ef>move</span> <span style=color:#f92672>|</span>_<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>    println!(<span style=color:#e6db74>&#34;Action called!&#34;</span>);
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h2 id=menu-macro>Menu macro<a hidden class=anchor aria-hidden=true href=#menu-macro>#</a></h2><p>Often, actions are used for menus, where each entry is connected to an action. The new <code>menu!</code> macro allows you to create menus conveniently with all the benefits of type-safe actions.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>// Create a `MenuModel` called `menu_model`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>menu! {
</span></span><span style=display:flex><span>    main_menu: {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;action&#34;</span> <span style=color:#f92672>=&gt;</span> Action,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;stateful action&#34;</span> <span style=color:#f92672>=&gt;</span> U8Action(<span style=color:#ae81ff>1_</span><span style=color:#66d9ef>u8</span>),
</span></span><span style=display:flex><span>        section! {
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;nested action&#34;</span> <span style=color:#f92672>=&gt;</span> Action,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;nested stateful action&#34;</span> <span style=color:#f92672>=&gt;</span> U8Action(<span style=color:#ae81ff>1_</span><span style=color:#66d9ef>u8</span>),
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=more-macro-magic>More macro magic<a hidden class=anchor aria-hidden=true href=#more-macro-magic>#</a></h2><p>The <code>widget</code> macro has been very helpful in creating readable and elegant UI definitions for regular components since the first release of Relm4.
Now, factories and micro components have received their own variants of the <code>widget</code> macro!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>// A simple `FactoryPrototype` implementation
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#[relm4::factory_prototype]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span> FactoryPrototype <span style=color:#66d9ef>for</span> Counter {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Factory</span> <span style=color:#f92672>=</span> FactoryVec<span style=color:#f92672>&lt;</span>Self<span style=color:#f92672>&gt;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Widgets</span> <span style=color:#f92672>=</span> FactoryWidgets;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>View</span> <span style=color:#f92672>=</span> gtk::Box;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Msg</span> <span style=color:#f92672>=</span> AppMsg;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    view! {
</span></span><span style=display:flex><span>        gtk::Button {
</span></span><span style=display:flex><span>            set_label: <span style=color:#a6e22e>watch</span><span style=color:#f92672>!</span>(<span style=color:#f92672>&amp;</span>self.value.to_string()),
</span></span><span style=display:flex><span>            connect_clicked(key) <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>move</span> <span style=color:#f92672>|</span>_<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>                sender.send(AppMsg::Clicked(key)).unwrap();
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>position</span>(<span style=color:#f92672>&amp;</span>self, _index: <span style=color:#66d9ef>&amp;</span><span style=color:#66d9ef>usize</span>) {}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=better-support-for-stack-and-tabview>Better support for Stack and TabView<a hidden class=anchor aria-hidden=true href=#better-support-for-stack-and-tabview>#</a></h2><p>Widgets such as <code>Stack</code> or <code>TabView</code> have methods that return a new widget, such as <code>StackPage</code>. The returned widget was previously inaccessibly in the <code>widget</code> macro and required manual code. This was addressed with <a href=https://github.com/AaronErhardt/Relm4/blob/main/relm4-examples/libadwaita/examples/view-switcher.rs#L93>a new syntax</a>.</p><h2 id=cleaner-dependencies>Cleaner dependencies<a hidden class=anchor aria-hidden=true href=#cleaner-dependencies>#</a></h2><p>Relm4 now re-exports more crates and has more feature flags. This means you don&rsquo;t have to include <code>gtk4</code>, <code>libadwaita</code> or <code>relm4-macros</code> anymore, if you have the correct feature flags set.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#a6e22e>relm4</span> = { <span style=color:#a6e22e>version</span> = <span style=color:#e6db74>&#34;0.4&#34;</span>, <span style=color:#a6e22e>features</span> = [<span style=color:#e6db74>&#34;tokio-rt&#34;</span>, <span style=color:#e6db74>&#34;macros&#34;</span>] }
</span></span></code></pre></div><h2 id=miscellaneous>Miscellaneous<a hidden class=anchor aria-hidden=true href=#miscellaneous>#</a></h2><ul><li>Several book improvements</li><li>Reworked initialization process</li><li>Some trait adjustments</li><li>Many bug fixes, better error messages and other improvements</li></ul><p>The full change log can be found <a href=https://github.com/AaronErhardt/Relm4/blob/main/CHANGES.md#040---2022-1-16>here</a>.</p><h1 id=where-to-get-started>Where to get started<a hidden class=anchor aria-hidden=true href=#where-to-get-started>#</a></h1><ul><li><p>⬆️ <strong><a href=https://aaronerhardt.github.io/relm4-book/book/0_2_to_0_4.html>Migration guide</a></strong></p></li><li><p>⭐ <strong><a href=https://github.com/AaronErhardt/relm4>Repository</a></strong></p></li><li><p>📖 <strong><a href=https://aaronerhardt.github.io/relm4-book/book/>Book</a></strong></p></li><li><p>📜 <strong><a href=https://aaronerhardt.github.io/docs/relm4/relm4/>Rust documentation</a></strong></p></li></ul><blockquote><p>Note: As of writing this, the book isn&rsquo;t fully ported to v0.4, but the examples in the repository are always up to date.</p></blockquote><h1 id=special-thanks>Special thanks<a hidden class=anchor aria-hidden=true href=#special-thanks>#</a></h1><p>I highly appreciate feedback and contributions to Relm4 and thank those who helped me with this release:</p><ul><li><a href=https://github.com/euclio>@euclio</a> who contributed many fixes and features</li><li><a href=https://github.com/mskorkowski>@mskorkowski</a> for his contributions and work on <a href=https://github.com/mskorkowski/relm4-store>relm4-store</a></li><li><a href=https://github.com/tronta>@tronta</a> who contributed a lot to the examples and book improvements</li><li>everyone else who gave feedback in the Matrix room or on GitHub</li><li>the whole gtk-rs team for providing awesome Rust bindings for GTK and always being helpful</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://aaronerhardt.github.io/blog/tags/relm4/>Relm4</a></li></ul><nav class=paginav><a class=prev href=https://aaronerhardt.github.io/blog/posts/plotters_future/><span class=title>« Prev</span><br><span>Planning the future of plotters</span>
</a><a class=next href=https://aaronerhardt.github.io/blog/posts/gui_speedrun/><span class=title>Next »</span><br><span>Speedrunning GUI development in Rust</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share A new Relm 4 you: announcing Relm4 v0.4! on x" href="https://x.com/intent/tweet/?text=A%20new%20Relm%204%20you%3a%20announcing%20Relm4%20v0.4%21&amp;url=https%3a%2f%2faaronerhardt.github.io%2fblog%2fposts%2fannouncing_relm4_v0.4%2f&amp;hashtags=relm4"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share A new Relm 4 you: announcing Relm4 v0.4! on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2faaronerhardt.github.io%2fblog%2fposts%2fannouncing_relm4_v0.4%2f&amp;title=A%20new%20Relm%204%20you%3a%20announcing%20Relm4%20v0.4%21&amp;summary=A%20new%20Relm%204%20you%3a%20announcing%20Relm4%20v0.4%21&amp;source=https%3a%2f%2faaronerhardt.github.io%2fblog%2fposts%2fannouncing_relm4_v0.4%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share A new Relm 4 you: announcing Relm4 v0.4! on reddit" href="https://reddit.com/submit?url=https%3a%2f%2faaronerhardt.github.io%2fblog%2fposts%2fannouncing_relm4_v0.4%2f&title=A%20new%20Relm%204%20you%3a%20announcing%20Relm4%20v0.4%21"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share A new Relm 4 you: announcing Relm4 v0.4! on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2faaronerhardt.github.io%2fblog%2fposts%2fannouncing_relm4_v0.4%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share A new Relm 4 you: announcing Relm4 v0.4! on whatsapp" href="https://api.whatsapp.com/send?text=A%20new%20Relm%204%20you%3a%20announcing%20Relm4%20v0.4%21%20-%20https%3a%2f%2faaronerhardt.github.io%2fblog%2fposts%2fannouncing_relm4_v0.4%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share A new Relm 4 you: announcing Relm4 v0.4! on telegram" href="https://telegram.me/share/url?text=A%20new%20Relm%204%20you%3a%20announcing%20Relm4%20v0.4%21&amp;url=https%3a%2f%2faaronerhardt.github.io%2fblog%2fposts%2fannouncing_relm4_v0.4%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share A new Relm 4 you: announcing Relm4 v0.4! on ycombinator" href="https://news.ycombinator.com/submitlink?t=A%20new%20Relm%204%20you%3a%20announcing%20Relm4%20v0.4%21&u=https%3a%2f%2faaronerhardt.github.io%2fblog%2fposts%2fannouncing_relm4_v0.4%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://aaronerhardt.github.io/blog/>Eberhardt blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>